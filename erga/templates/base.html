{% load static %}
{% load i18n %}
{% load l10n %}
{% load bootstrap4 %}
{% block header %}
{% block extra_head_tags %}
<meta name=“robots” content=“noindex”>
<meta name="googlebot" content="nofollow" />
<meta name="robots" content="nofollow" />
{% endblock %}
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GB178NJNEK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GB178NJNEK');
</script>
<link rel="icon"
      type="image/png"
      href="https://genomes.cnag.cat/static/favicon.ico">
<link rel="stylesheet" href="/static/css/sidebar.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1">

{% endblock %}
<!-- <script src="https://unpkg.com/@popperjs/core@2"></script> -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wruczek/Bootstrap-Cookie-Alert@gh-pages/cookiealert.css">

<!-- Our Custom CSS -->
<link rel="stylesheet" href="/static/css/sidebar.css">
<link rel="stylesheet" href="/static/css/status.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

<!-- <link rel="stylesheet" href="/static/css/loader.css"> -->
<!-- Scrollbar Custom CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
<title>{{ build_page_title }}</title>
<!-- Font Awesome JS -->
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/0636c1cb0c.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js"></script>
<style>
body {
 padding-bottom: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
}
.footer {
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  background-color: #DDD;
  color: black;
  text-align: center;
}
</style>
{% if not view.is_popup %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="{% url 'home' %}"><img src="{% static "erga-sts-2.png" %}" width=150 alt="ERGA"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        {% if user.is_authenticated %}  
        <li class="nav-item">
          <a class="nav-link" id="overviewlink" href="{% url 'overview' %}">Status</a>
        </li>


        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Species and Sampling
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" id="specieslink" href="{% url 'species_list' %}">Species</a>
              <a class="dropdown-item" id="goatlink" href="{% url 'goat_list' %}">GoaT Target List</a>
              <a class="dropdown-item" id="collectionlink" href="{% url 'collection_list' %}">Collection</a>
              <a class="dropdown-item" id="specimenslink" href="{% url 'specimen_list' %}">Specimens</a>
              <a class="dropdown-item" id="sampleslink" href="{% url 'sample_list' %}">Samples</a>
          </div>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Data
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" id="runslink" href="{% url 'runs_list' %}">Runs</a>
              <a class="dropdown-item" id="runslink" href="{% url 'ena_runs_list' %}">Runs (ENA)</a>
              <a class="dropdown-item" id="readslink" href="{% url 'ena_reads_list' %}">Data Summary</a>
              <a class="dropdown-item" id="readslink" href="{% url 'ena_reads_list' %}">Data Summary (ENA)</a>
              <a class="dropdown-item" id="assemblylink" href="{% url 'assembly_list' %}">Assemblies</a>
          </div>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Management
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="{% url 'admin:index' %}">Admin</a>
              <a class="dropdown-item" id="teamslink" href="{% url 'genome_teams' %}">Teams</a>
              <a class="dropdown-item" id="authorslink" href="{% url 'author_list' %}">Authors</a>
              <a class="dropdown-item" href="{% url 'add_species_list' %}">Load-Species</a>
              <a class="dropdown-item" href="{% url 'api-root' %}">API</a>
          </div>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="{% url 'help' %}">Help</a>
        </li>
        {% endif %}
        
      </ul>
      <ul class="navbar-nav ml-auto">
        {% if user.is_authenticated %}
          <li class="nav-item">
          <a class="navbar-text">Hello, <strong>{{ user.username }}</strong>.</a>
          </li> 
          <li class="nav-item">
            <a class="nav-link" href="{% url 'edit_profile' %}">Update Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'account_email' %}">Change E-mail</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'account_logout' %}">Logout <i class="fas fa-sign-out-alt fa-lg"></i></a>
          </li>
          {% else %}
          <li class="nav-item">
          <a class="nav-link" href="{% url 'account_login' %}">Login/Register <i class="fas fa-sign-in-alt fa-lg"></i></a>
          </li>
          {% endif %}
      </ul>
    </div>
</nav>
{% endif %}
<div class="row">
<div class="content container-fluid">
        <div class="row">
            <div class="col-md-12">
		<div id="content">
			{% block content %}{% endblock %}
		</div>
	    </div>
	</div>
</div>
</div>
<div class="row">
<div class="container-fluid">
  {% block page_content %}{% endblock %}
</div>
</div>

{% if messages %}
<div class="row">
  <div class="col-md-12">
    <div class="card mb-2">
      <div class="card-body">
      <h5 class="card-title"><strong>Messages</strong></h5>
      <ul>
        {% for message in messages %}
        <li {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
      </ul>
      </div>
    </div>
  </div>
</div>
{% endif %}

<!-- Footer -->
<div class="footer"> <!-- class="page-footer font-small blue pt-4">  -->

  <!-- Footer Links -->
<div class="container-fluid text-center text-md-left">

    <!-- Grid row -->
    <div class="row mt-1 mb-1">

      <!-- Grid column -->
      <div class="col-md-12">
	<!-- <h5 class="text-uppercase">Collaborators</h5> -->
        <div class="row">
        <!-- Content -->
        <div class="col-sm-4 my-auto text-center"><a target="_blank" href="https://www.cnag.cat/"><img src="/static/CNAG_logo.png" ></a></div>
        <div class="col-sm-4 my-auto text-center"><a target="_blank" href="https://www.erga-biodiversity.eu/"><img src="/static/ERGA.png" height=50></a></div>
        <div class="col-sm-4 my-auto text-center"><a target="_blank" href="https://biodiversitygenomics.eu/"><img src="/static/BGE_color.png" height=50></a></div>
      </div>
      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links -->
<!-- START Bootstrap-Cookie-Alert -->
<div class="alert text-center cookiealert" role="alert">
    <b>Do you like cookies?</b> &#x1F36A; We use cookies to ensure you get the best experience on our website. <a href="https://cookiesandyou.com/" target="_blank">Learn more</a>

    <button type="button" class="btn btn-primary btn-sm acceptcookies" aria-label="Close">
        I agree
    </button>
</div>
<!-- END Bootstrap-Cookie-Alert -->
</div>
<!-- Footer -->
<script src="https://cdn.jsdelivr.net/gh/Wruczek/Bootstrap-Cookie-Alert@gh-pages/cookiealert.js"></script>


<!-- jQuery CDN - Slim version (=without AJAX) -->
<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>

 <!-- jQuery Custom Scroller CDN -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
 

<script type="text/javascript">
    $(document).ready(function () {
        $("#sidebar").mCustomScrollbar({
            theme: "minimal"
        });

        $('#dismiss, .overlay').on('click', function () {
            $('#sidebar').removeClass('active');
            $('.overlay').removeClass('active');
        });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').addClass('active');
            $('.overlay').addClass('active');
            $('.collapse.in').toggleClass('in');
            $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        });
    });

    function spinner() {
    	// const spinnerDisplayer = document.querySelector('.spinner-displayer');
    	const specieslink = document.getElementById('specieslink');
    	specieslink.addEventListener('click', () => {
        $("#speciesspinner").show();
      })
      const sampleslink = document.getElementById('sampleslink');
    	sampleslink.addEventListener('click', () => {
        $("#samplesspinner").show();
      })
      const collectionlink = document.getElementById('collectionlink');
    	sampleslink.addEventListener('click', () => {
        $("#collectionspinner").show();
      })
      const overviewlink = document.getElementById('overviewlink');
    	overviewlink.addEventListener('click', () => {
        $("#overviewspinner").show();
      })
      const teamslink = document.getElementById('teamslink');
    	teamslink.addEventListener('click', () => {
        $("#teamsspinner").show();
      })
      const projectlink = document.getElementById('projectlink');
    	projectlink.addEventListener('click', () => {
        $("#projectspinner").show();
      })
      const assemblylink = document.getElementById('assemblylink');
    	assemblylink.addEventListener('click', () => {
        $("#assemblyspinner").show();
      })
      const runslink = document.getElementById('runslink');
    	readslink.addEventListener('click', () => {
        $("#runsspinner").show();
      })
      const readslink = document.getElementById('readslink');
    	readslink.addEventListener('click', () => {
        $("#readsspinner").show();
      })
      const specimenslink = document.getElementById('specimenslink');
    	readslink.addEventListener('click', () => {
        $("#specimensspinner").show();
      })
      const authorslink = document.getElementById('authorslink');
    	readslink.addEventListener('click', () => {
        $("#authorsspinner").show();
      })
    }

    spinner();
</script>

<script src="{% static 'admin/js/vendor/jquery/jquery.min.js' %}" type="text/javascript"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="/static/admin/js/jquery.init.js"></script>
 
<script src="/static/admin/js/admin/RelatedObjectLookups.js"></script>

 {{ form.media }}
